{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\fixel\\\\dashboard\\\\src\\\\Components\\\\UserProfile\\\\UserProfile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport \"./UserProfile.css\";\nimport { useStore } from \"../../Store/Store\";\nimport { profileUpdate } from \"../../Store/Actions\";\nimport { Icon } from \"react-icons-kit\";\nimport CustomButton from \"../CustomButton/CustomButton\";\nimport { edit } from \"react-icons-kit/feather/edit\";\nconst defaultProfileImage = \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR6Q82WISxpWPp5dHBTWHypFOZbRTvc0ST0xQ&usqp=CAU\";\nexport default function UserProfile(props) {\n  _s();\n\n  const {\n    state,\n    dispatch\n  } = useStore();\n  const {\n    user\n  } = state;\n  const [isEdit, setIsEdit] = useState(false);\n  const [userUploadData, setUserUploadData] = useState({\n    file: null,\n    bio: null\n  });\n  let userProfile_image = state.user.profile_img;\n  const buffer = Buffer.from(userProfile_image.buffer.data);\n  const base64String = buffer.toString(\"base64\");\n  const isUploadReady = userUploadData.file === null && userUploadData.bio === null ? false : true;\n\n  function handleImageChange(e) {\n    let reader = new FileReader();\n    let file = userUploadData.file;\n\n    reader.onloadend = () => {\n      dispatch({\n        type: \"UPDATE_USER_DATA\",\n        payload: reader.result\n      });\n      setIsEdit(false);\n    };\n\n    if (file) reader.readAsDataURL(file);\n  }\n\n  function handleProfileUpdate() {\n    if (userUploadData.bio === null) userUploadData.bio = state.user.bio;\n    profileUpdate(userUploadData, state.user.email);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user_profile_container\",\n    children: [user && user.full_name && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user_welcome\",\n      children: [\"Welcome\\xA0\", user.full_name && user.full_name.toString()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"image_edit_icon\",\n      children: /*#__PURE__*/_jsxDEV(Icon, {\n        icon: edit,\n        onClick: () => setIsEdit(!isEdit)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user_image_container\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"user_image\",\n          alt: \"user image\",\n          src: base64String || defaultProfileImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"file_upload\",\n          children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this), isEdit && /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            onChange: e => {\n              let newFile = e.target.files;\n              if (newFile.length > 0 && newFile[0].size && newFile[0].type.toString().indexOf(\"image\") > -1) setUserUploadData({ ...userUploadData,\n                file: newFile[0]\n              });else dispatch({\n                type: \"ERROR\",\n                payload: {\n                  type: \"Incorrect file type\",\n                  msg: \"Uploaded file is wrong. please reupload\"\n                }\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user_bio\",\n        children: [isEdit && /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"user_profile_text_area\",\n          onChange: e => setUserUploadData({ ...userUploadData,\n            bio: e.target.value\n          }),\n          children: user && user.bio && user.bio !== null ? user.bio : \"your bio here...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), !isEdit && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user_bio\",\n          children: user && user.bio ? user.bio : \"your bio here..\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CustomButton, {\n      disabled: isUploadReady,\n      text: \"Submit\",\n      onClick: () => {\n        handleImageChange();\n        handleProfileUpdate();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n\n_s(UserProfile, \"v4dIWzOS/bkvGKvGw8f9HOQbGQw=\", false, function () {\n  return [useStore];\n});\n\n_c = UserProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProfile\");","map":{"version":3,"sources":["D:/fixel/dashboard/src/Components/UserProfile/UserProfile.js"],"names":["React","useState","useStore","profileUpdate","Icon","CustomButton","edit","defaultProfileImage","UserProfile","props","state","dispatch","user","isEdit","setIsEdit","userUploadData","setUserUploadData","file","bio","userProfile_image","profile_img","buffer","Buffer","from","data","base64String","toString","isUploadReady","handleImageChange","e","reader","FileReader","onloadend","type","payload","result","readAsDataURL","handleProfileUpdate","email","full_name","newFile","target","files","length","size","indexOf","msg","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./UserProfile.css\";\r\nimport { useStore } from \"../../Store/Store\";\r\nimport { profileUpdate } from \"../../Store/Actions\";\r\nimport { Icon } from \"react-icons-kit\";\r\nimport CustomButton from \"../CustomButton/CustomButton\";\r\nimport { edit } from \"react-icons-kit/feather/edit\";\r\n\r\nconst defaultProfileImage =\r\n  \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR6Q82WISxpWPp5dHBTWHypFOZbRTvc0ST0xQ&usqp=CAU\";\r\n\r\nexport default function UserProfile(props) {\r\n  const { state, dispatch } = useStore();\r\n  const { user } = state;\r\n  const [isEdit, setIsEdit] = useState(false);\r\n  const [userUploadData, setUserUploadData] = useState({\r\n    file: null,\r\n    bio: null,\r\n  });\r\n  let userProfile_image = state.user.profile_img;\r\n\r\n  const buffer = Buffer.from(userProfile_image.buffer.data);\r\n\r\n  const base64String = buffer.toString(\"base64\");\r\n\r\n  const isUploadReady =\r\n    userUploadData.file === null && userUploadData.bio === null ? false : true;\r\n\r\n  function handleImageChange(e) {\r\n    let reader = new FileReader();\r\n    let file = userUploadData.file;\r\n\r\n    reader.onloadend = () => {\r\n      dispatch({ type: \"UPDATE_USER_DATA\", payload: reader.result });\r\n      setIsEdit(false);\r\n    };\r\n    if (file) reader.readAsDataURL(file);\r\n  }\r\n  function handleProfileUpdate() {\r\n    if (userUploadData.bio === null) userUploadData.bio = state.user.bio;\r\n    profileUpdate(userUploadData, state.user.email);\r\n  }\r\n  return (\r\n    <div className=\"user_profile_container\">\r\n      {user && user.full_name && (\r\n        <div className=\"user_welcome\">\r\n          Welcome&nbsp;{user.full_name && user.full_name.toString()}\r\n        </div>\r\n      )}\r\n      <div className=\"image_edit_icon\">\r\n        <Icon icon={edit} onClick={() => setIsEdit(!isEdit)} />\r\n      </div>\r\n      <div>\r\n        <div className=\"user_image_container\">\r\n          <img\r\n            className=\"user_image\"\r\n            alt=\"user image\"\r\n            src={base64String || defaultProfileImage}\r\n          />\r\n          <div className=\"file_upload\">\r\n            <br />\r\n            {isEdit && (\r\n              <input\r\n                type=\"file\"\r\n                onChange={(e) => {\r\n                  let newFile = e.target.files;\r\n\r\n                  if (\r\n                    newFile.length > 0 &&\r\n                    newFile[0].size &&\r\n                    newFile[0].type.toString().indexOf(\"image\") > -1\r\n                  )\r\n                    setUserUploadData({ ...userUploadData, file: newFile[0] });\r\n                  else\r\n                    dispatch({\r\n                      type: \"ERROR\",\r\n                      payload: {\r\n                        type: \"Incorrect file type\",\r\n                        msg: \"Uploaded file is wrong. please reupload\",\r\n                      },\r\n                    });\r\n                }}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>{\" \"}\r\n        <br />\r\n        <br />\r\n        <div className=\"user_bio\">\r\n          {isEdit && (\r\n            <textarea\r\n              className=\"user_profile_text_area\"\r\n              onChange={(e) =>\r\n                setUserUploadData({ ...userUploadData, bio: e.target.value })\r\n              }\r\n            >\r\n              {user && user.bio && user.bio !== null\r\n                ? user.bio\r\n                : \"your bio here...\"}\r\n            </textarea>\r\n          )}\r\n          {!isEdit && (\r\n            <div className=\"user_bio\">\r\n              {user && user.bio ? user.bio : \"your bio here..\"}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <CustomButton\r\n        disabled={isUploadReady}\r\n        text=\"Submit\"\r\n        onClick={() => {\r\n          handleImageChange();\r\n\r\n          handleProfileUpdate();\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}