{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\fixel\\\\dashboard\\\\src\\\\Components\\\\UserProfile\\\\UserProfile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport \"./UserProfile.css\";\nimport { useStore } from \"../../Store/Store\";\nimport { profileUpdate } from \"../../Store/Actions\";\nimport { Icon } from \"react-icons-kit\";\nimport CustomButton from \"../CustomButton/CustomButton\";\nimport { edit } from \"react-icons-kit/feather/edit\";\nconst defaultProfileImage = \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR6Q82WISxpWPp5dHBTWHypFOZbRTvc0ST0xQ&usqp=CAU\";\nexport default function UserProfile(props) {\n  _s();\n\n  const {\n    state,\n    dispatch\n  } = useStore();\n  const {\n    user\n  } = state;\n  const [isEdit, setIsEdit] = useState(false);\n  const [userUploadData, setUserUploadData] = useState({\n    file: null,\n    bio: null\n  });\n  const isUploadReady = userUploadData.file === null && userUploadData.bio === null ? false : true;\n\n  async function handleImageChange(e) {\n    return new Promise(resolve => {\n      let reader = new FileReader();\n      let file = userUploadData.file;\n\n      reader.onloadend = () => {\n        //dispatch({ type: \"UPDATE_USER_DATA\", payload: reader.result });\n        setIsEdit(false);\n        resolve(reader.result);\n      };\n\n      if (file) reader.readAsDataURL(file);\n    });\n  }\n\n  async function handleProfileUpdate() {\n    dispatch({\n      type: \"LOADING\",\n      payload: true\n    });\n    if (userUploadData.bio === null) userUploadData.bio = state.user.bio;\n    let base64Img = null;\n    if (userUploadData.file) base64Img = await handleImageChange();\n    profileUpdate({ ...userUploadData,\n      file: base64Img ? base64Img : state.user.profile_img\n    }, state.user.email, dispatch);\n    setUserUploadData({\n      file: null,\n      bio: null\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user_profile_container\",\n    children: [user && user.full_name && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user_welcome\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"user_profile_welcome\",\n        children: \"Welcome\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user_profile_user_name\",\n        children: user.full_name && user.full_name.toString().substring(0, 1).toUpperCase() + user.full_name.toString().substring(1)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"image_edit_icon\",\n      children: /*#__PURE__*/_jsxDEV(Icon, {\n        icon: edit,\n        onClick: () => {\n          if (isEdit) setUserUploadData({\n            file: null,\n            bio: null\n          });\n          setIsEdit(!isEdit);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user_image_container\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"user_image\",\n          alt: \"user image\",\n          src: state.user.profile_img || defaultProfileImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"file_upload\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            style: {\n              visibility: isEdit ? 1 : 0\n            },\n            type: \"file\",\n            onChange: e => {\n              let newFile = e.target.files;\n              if (newFile.length > 0 && newFile[0].size && newFile[0].type.toString().indexOf(\"image\") > -1) setUserUploadData({ ...userUploadData,\n                file: newFile[0]\n              });else dispatch({\n                type: \"ERROR\",\n                payload: {\n                  type: \"Incorrect file type\",\n                  msg: \"Uploaded file is wrong. please reupload\"\n                }\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user_bio\",\n        children: [isEdit && /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"user_profile_text_area\",\n          onChange: e => setUserUploadData({ ...userUploadData,\n            bio: e.target.value\n          }),\n          children: \"your bio here...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this), !isEdit && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user_bio\",\n          children: user && user.profile_bio && user.profile_bio\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CustomButton, {\n      loading: state.loading,\n      disabled: isUploadReady,\n      text: \"Submit\",\n      onClick: () => {\n        setIsEdit(false);\n        handleProfileUpdate();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n\n_s(UserProfile, \"v4dIWzOS/bkvGKvGw8f9HOQbGQw=\", false, function () {\n  return [useStore];\n});\n\n_c = UserProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProfile\");","map":{"version":3,"sources":["D:/fixel/dashboard/src/Components/UserProfile/UserProfile.js"],"names":["React","useState","useStore","profileUpdate","Icon","CustomButton","edit","defaultProfileImage","UserProfile","props","state","dispatch","user","isEdit","setIsEdit","userUploadData","setUserUploadData","file","bio","isUploadReady","handleImageChange","e","Promise","resolve","reader","FileReader","onloadend","result","readAsDataURL","handleProfileUpdate","type","payload","base64Img","profile_img","email","full_name","toString","substring","toUpperCase","visibility","newFile","target","files","length","size","indexOf","msg","value","profile_bio","loading"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./UserProfile.css\";\r\nimport { useStore } from \"../../Store/Store\";\r\nimport { profileUpdate } from \"../../Store/Actions\";\r\nimport { Icon } from \"react-icons-kit\";\r\nimport CustomButton from \"../CustomButton/CustomButton\";\r\nimport { edit } from \"react-icons-kit/feather/edit\";\r\n\r\nconst defaultProfileImage =\r\n  \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR6Q82WISxpWPp5dHBTWHypFOZbRTvc0ST0xQ&usqp=CAU\";\r\n\r\nexport default function UserProfile(props) {\r\n  const { state, dispatch } = useStore();\r\n  const { user } = state;\r\n  const [isEdit, setIsEdit] = useState(false);\r\n  const [userUploadData, setUserUploadData] = useState({\r\n    file: null,\r\n    bio: null,\r\n  });\r\n\r\n  const isUploadReady =\r\n    userUploadData.file === null && userUploadData.bio === null ? false : true;\r\n\r\n  async function handleImageChange(e) {\r\n    return new Promise((resolve) => {\r\n      let reader = new FileReader();\r\n      let file = userUploadData.file;\r\n\r\n      reader.onloadend = () => {\r\n        //dispatch({ type: \"UPDATE_USER_DATA\", payload: reader.result });\r\n        setIsEdit(false);\r\n        resolve(reader.result);\r\n      };\r\n      if (file) reader.readAsDataURL(file);\r\n    });\r\n  }\r\n  async function handleProfileUpdate() {\r\n    dispatch({ type: \"LOADING\", payload: true });\r\n    if (userUploadData.bio === null) userUploadData.bio = state.user.bio;\r\n    let base64Img = null;\r\n    if (userUploadData.file) base64Img = await handleImageChange();\r\n\r\n    profileUpdate(\r\n      {\r\n        ...userUploadData,\r\n        file: base64Img ? base64Img : state.user.profile_img,\r\n      },\r\n      state.user.email,\r\n      dispatch\r\n    );\r\n    setUserUploadData({ file: null, bio: null });\r\n  }\r\n  return (\r\n    <div className=\"user_profile_container\">\r\n      {user && user.full_name && (\r\n        <div className=\"user_welcome\">\r\n          <span className=\"user_profile_welcome\">Welcome</span>&nbsp;\r\n          <div className=\"user_profile_user_name\">\r\n            {user.full_name &&\r\n              user.full_name.toString().substring(0, 1).toUpperCase() +\r\n                user.full_name.toString().substring(1)}\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div className=\"image_edit_icon\">\r\n        <Icon\r\n          icon={edit}\r\n          onClick={() => {\r\n            if (isEdit) setUserUploadData({ file: null, bio: null });\r\n            setIsEdit(!isEdit);\r\n          }}\r\n        />\r\n      </div>\r\n      <div>\r\n        <div className=\"user_image_container\">\r\n          <img\r\n            className=\"user_image\"\r\n            alt=\"user image\"\r\n            src={state.user.profile_img || defaultProfileImage}\r\n          />\r\n          <div className=\"file_upload\">\r\n            <input\r\n              style={{ visibility: isEdit ? 1 : 0 }}\r\n              type=\"file\"\r\n              onChange={(e) => {\r\n                let newFile = e.target.files;\r\n\r\n                if (\r\n                  newFile.length > 0 &&\r\n                  newFile[0].size &&\r\n                  newFile[0].type.toString().indexOf(\"image\") > -1\r\n                )\r\n                  setUserUploadData({ ...userUploadData, file: newFile[0] });\r\n                else\r\n                  dispatch({\r\n                    type: \"ERROR\",\r\n                    payload: {\r\n                      type: \"Incorrect file type\",\r\n                      msg: \"Uploaded file is wrong. please reupload\",\r\n                    },\r\n                  });\r\n              }}\r\n            />\r\n          </div>\r\n        </div>{\" \"}\r\n        <div className=\"user_bio\">\r\n          {isEdit && (\r\n            <textarea\r\n              className=\"user_profile_text_area\"\r\n              onChange={(e) =>\r\n                setUserUploadData({ ...userUploadData, bio: e.target.value })\r\n              }\r\n            >\r\n              your bio here...\r\n            </textarea>\r\n          )}\r\n          {!isEdit && (\r\n            <div className=\"user_bio\">\r\n              {user && user.profile_bio && user.profile_bio}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <CustomButton\r\n        loading={state.loading}\r\n        disabled={isUploadReady}\r\n        text=\"Submit\"\r\n        onClick={() => {\r\n          setIsEdit(false);\r\n          handleProfileUpdate();\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}